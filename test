import { mount } from '@vue/test-utils'
import { describe, it, expect, beforeEach } from 'vitest'
import mckitui from 'mc-kit-ui/src/plugins/mc-kit-ui'

import DocumentsInformationDocument from '../DocumentsInformationDocument.vue'

describe('DocumentsInformationDocument.vue', () => {
  let wrapper = null

  const documentDonnees = {
    id: 51,
    uuid: '776297aa-719d-482a-9ece-247cc0e92fd1',
    userId: { uuid: '18105' },
    extension: 'pdf',
    type: 'Mixte',
    isDelete: false,
    statut: true,
    error: false,
    send: false,
    merge: false,
    mail: false,
    cc: false,
    documents: ['DE000036', 'DE000037'],
    destinataires: null,
    mailContent: null,
    archive: 'Export_30ced1af3875bac0e9d0101f61033929.zip',
    createdAt: '2025-09-24 10:55:44',
    updatedAt: '2025-09-24 10:56:20',
    hash: '308d5275e6d8a902bfe6ab306f5230ea3e6eaf5d',
    partenaires: ['The Electric City', 'FED Division, Aerospace Group, Eaton'],
    userMail: 'pcistac@macompta.fr',
  }

  beforeEach(() => {
    wrapper = mount(DocumentsInformationDocument, {
      global: {
        plugins: [mckitui],
      },
      props: {
        documentsActionDocumentDonnee: documentDonnees,
      },
    })
  })

  it('affiche "Oui" ou "Non" pour chaque information selon les props', () => {
    const mergeSpan = wrapper.findComponent('[test-id="test_daddfu"]')
    expect(mergeSpan.exists()).toBeTruthy()
    expect(mergeSpan.text()).toBe('Oui')

    const sendSpan = wrapper.find('[test-id="test_dadden"]')
    expect(sendSpan.exists()).toBeTruthy()
    expect(sendSpan.text()).toBe('Non')

    const ccSpan = wrapper.find('[test-id="test_daddcc"]')
    expect(ccSpan.exists()).toBeTruthy()
    expect(ccSpan.text()).toBe('Oui')
  })
})
