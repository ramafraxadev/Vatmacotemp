import { mount } from '@vue/test-utils'
import { describe, it, expect, beforeEach } from 'vitest'
import mckitui from 'mc-kit-ui/src/plugins/mc-kit-ui'
import DocumentsInformationDocument from '../DocumentsInformationDocument.vue'

describe('DocumentsInformationDocument.vue', () => {
  let wrapper

  const documentDonnees = {
    id: 51,
    uuid: '776297aa-719d-482a-9ece-247cc0e92fd1',
    extension: 'pdf',
    type: 'Mixte',
    merge: true,
    send: false,
    cc: true,
  }

  beforeEach(() => {
    wrapper = mount(DocumentsInformationDocument, {
      global: {
        plugins: [mckitui],
      },
      props: {
        documentsActionDocumentDonnee: documentDonnees,
      },
    })
  })

  it('affiche "Oui" ou "Non" pour chaque information selon les props', () => {
    // Vérifie le champ merge
    const mergeSpan = wrapper.findComponent({ ref: undefined, name: undefined, selector: '[test-id="test_daddfu"]' })
    expect(mergeSpan.exists()).toBe(true)
    expect(mergeSpan.text().trim()).toBe('Oui')

    // Vérifie le champ send
    const sendSpan = wrapper.findComponent({ selector: '[test-id="test_dadden"]' })
    expect(sendSpan.exists()).toBe(true)
    expect(sendSpan.text().trim()).toBe('Non')

    // Vérifie le champ cc
    const ccSpan = wrapper.findComponent({ selector: '[test-id="test_daddcc"]' })
    expect(ccSpan.exists()).toBe(true)
    expect(ccSpan.text().trim()).toBe('Oui')
  })
})
